<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MY-LogiC | AI Contract Intelligence</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    :root {
        --primary: #6366f1;
        --primary-glow: rgba(99, 102, 241, 0.4);
        --accent: #a5b4fc;
        --bg-dark: #0f172a;
        --glass-bg: rgba(30, 41, 59, 0.7);
        --glass-border: rgba(255, 255, 255, 0.08);
        --text-main: #f8fafc;
        --text-muted: #94a3b8;
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
    }

    * { box-sizing: border-box; transition: all 0.2s ease; }

    body {
        margin: 0;
        font-family: 'Plus Jakarta Sans', sans-serif;
        background:
            radial-gradient(circle at 15% 50%, rgba(99, 102, 241, 0.15), transparent 25%),
            radial-gradient(circle at 85% 30%, rgba(168, 85, 247, 0.15), transparent 25%),
            linear-gradient(135deg, rgba(15, 23, 42, 0.92) 0%, rgba(15, 23, 42, 0.85) 100%),
            url('https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fit=crop&q=80');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        color: var(--text-main);
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }

    .main-wrapper {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        padding-bottom: 80px;
    }

    .hero {
        margin-top: 80px;
        text-align: center;
        padding: 0 20px;
        animation: fadeInDown 0.8s ease-out;
    }

    .hero h1 {
        font-family: 'Outfit', sans-serif;
        font-size: 4rem;
        margin: 0 0 15px 0;
        font-weight: 700;
        letter-spacing: -1.5px;
        background: linear-gradient(to right, #ffffff 20%, #818cf8 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
    }

    .hero p {
        color: var(--text-muted);
        font-size: 1.2rem;
        font-weight: 400;
        max-width: 600px;
        margin: 0 auto;
        line-height: 1.6;
    }

    .card {
        margin-top: 50px;
        background: var(--glass-bg);
        backdrop-filter: blur(24px);
        -webkit-backdrop-filter: blur(24px);
        border: 1px solid var(--glass-border);
        padding: 50px;
        border-radius: 30px;
        width: 90%;
        max-width: 650px;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5), inset 0 0 0 1px rgba(255,255,255,0.05);
        animation: scaleIn 0.6s ease-out;
    }

    .upload-container {
        position: relative;
        margin-bottom: 25px;
    }

    .upload-label {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        border: 2px dashed rgba(255, 255, 255, 0.15);
        padding: 50px 20px;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        background: rgba(255, 255, 255, 0.02);
    }

    .upload-label:hover {
        border-color: var(--primary);
        background: rgba(99, 102, 241, 0.08);
        transform: translateY(-4px);
        box-shadow: 0 10px 30px -10px rgba(99, 102, 241, 0.3);
    }

    .upload-label i {
        font-size: 3rem;
        background: linear-gradient(to bottom, #818cf8, #6366f1);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 20px;
        filter: drop-shadow(0 4px 10px rgba(99, 102, 241, 0.3));
    }

    .upload-label span {
        font-weight: 600;
        font-size: 1.1rem;
        color: var(--text-main);
    }

    .upload-label small {
        margin-top: 8px;
        color: var(--text-muted);
        font-size: 0.9rem;
    }

    input[type="file"] { display: none; }

    .btn-analyze {
        width: 100%;
        padding: 18px;
        border: none;
        border-radius: 16px;
        background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
        color: white;
        font-size: 1.1rem;
        font-weight: 700;
        letter-spacing: 0.5px;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        box-shadow: 0 10px 20px -5px rgba(79, 70, 229, 0.4);
    }

    .btn-analyze::before {
        content: '';
        position: absolute;
        top: 0; left: -100%;
        width: 100%; height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: 0.5s;
    }

    .btn-analyze:hover {
        transform: translateY(-2px);
        box-shadow: 0 15px 30px -5px rgba(79, 70, 229, 0.5);
    }

    .btn-analyze:hover::before {
        left: 100%;
    }

    .btn-analyze:disabled {
        opacity: 0.7;
        cursor: not-allowed;
        transform: none;
    }

    #loader {
        display: none;
        text-align: center;
        margin-top: 30px;
    }

    .spinner {
        width: 48px;
        height: 48px;
        border: 4px solid rgba(255,255,255,0.1);
        border-top: 4px solid var(--primary);
        border-radius: 50%;
        animation: spin 1s cubic-bezier(0.55, 0.055, 0.675, 0.19) infinite;
        margin: 0 auto 15px;
        box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
    }

    .loading-text {
        font-size: 0.95rem;
        letter-spacing: 1px;
        color: var(--accent);
        font-weight: 500;
        animation: pulse 1.5s infinite;
    }

    #results {
        margin-top: 60px;
        width: 90%;
        max-width: 900px;
        display: none;
    }

    .result {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.08);
        padding: 0;
        border-radius: 20px;
        margin-bottom: 30px;
        overflow: hidden;
        animation: slideUp 0.5s ease-out backwards;
        transition: transform 0.3s, box-shadow 0.3s;
    }

    .result:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.3);
        border-color: rgba(99, 102, 241, 0.3);
    }

    .result-header {
        background: rgba(255, 255, 255, 0.03);
        padding: 20px 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .clause-type {
        font-family: 'Outfit', sans-serif;
        font-weight: 700;
        font-size: 1.1rem;
        color: white;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .score-badge {
        padding: 6px 14px;
        border-radius: 99px;
        font-size: 0.8rem;
        font-weight: 700;
        letter-spacing: 0.5px;
        text-transform: uppercase;
    }

    .result-body {
        padding: 30px;
    }

    .extracted-text {
        font-family: 'Plus Jakarta Sans', sans-serif;
        color: #e2e8f0;
        line-height: 1.7;
        font-size: 1.05rem;
        background: rgba(15, 23, 42, 0.6);
        padding: 20px;
        border-radius: 12px;
        border-left: 4px solid var(--primary);
        margin-bottom: 20px;
    }

    .ai-insight {
        display: flex;
        gap: 12px;
        color: var(--text-muted);
        font-size: 0.95rem;
        line-height: 1.6;
        align-items: flex-start;
    }

    .ai-insight i {
        color: var(--accent);
        margin-top: 4px;
    }

    .error-message {
        margin-top: 20px;
        padding: 15px;
        background: rgba(239, 68, 68, 0.15);
        border: 1px solid #ef4444;
        border-radius: 12px;
        color: #fecaca;
        text-align: center;
        font-size: 0.95rem;
    }

    /* --- BEAUTIFUL FOOTER --- */
    .site-footer {
        background: rgba(10, 15, 30, 0.8);
        backdrop-filter: blur(20px);
        border-top: 1px solid rgba(255, 255, 255, 0.05);
        padding: 60px 0 25px;
        margin-top: auto;
        width: 100%;
    }

    .footer-content {
        max-width: 1100px;
        margin: 0 auto;
        padding: 0 30px;
        display: grid;
        grid-template-columns: 2fr 1fr 1fr;
        gap: 50px;
    }

    .footer-brand h4 {
        font-family: 'Outfit', sans-serif;
        font-size: 1.8rem;
        margin: 0 0 15px 0;
        background: linear-gradient(to right, #fff, #818cf8);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .footer-brand p {
        color: var(--text-muted);
        line-height: 1.6;
        font-size: 0.95rem;
        max-width: 350px;
    }

    .footer-col h5 {
        color: white;
        font-size: 1rem;
        margin-bottom: 25px;
        font-weight: 600;
        letter-spacing: 0.5px;
        text-transform: uppercase;
    }

    .footer-col ul { list-style: none; padding: 0; margin: 0; }
    .footer-col ul li { margin-bottom: 12px; }

    .footer-col a {
        color: #94a3b8;
        text-decoration: none;
        transition: all 0.2s;
        font-size: 0.95rem;
    }

    .footer-col a:hover {
        color: var(--primary);
        padding-left: 6px;
    }

    .social-links { display: flex; gap: 15px; }
    .social-icon {
        width: 40px; height: 40px;
        border-radius: 12px; /* Soft square */
        background: rgba(255,255,255,0.05);
        display: flex; align-items: center; justify-content: center;
        color: white; text-decoration: none;
        border: 1px solid rgba(255,255,255,0.1);
        transition: all 0.3s;
    }
    .social-icon:hover {
        background: var(--primary);
        border-color: var(--primary);
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(99, 102, 241, 0.4);
    }

    .footer-bottom {
        text-align: center;
        margin-top: 50px;
        padding-top: 25px;
        border-top: 1px solid rgba(255,255,255,0.05);
        color: #64748b;
        font-size: 0.85rem;
    }

    @media(max-width: 800px) {
        .footer-content { grid-template-columns: 1fr; text-align: center; }
        .footer-brand { margin-bottom: 30px; }
        .footer-brand p { margin: 0 auto; }
        .social-links { justify-content: center; }
    }

    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    @keyframes pulse { 0%, 100% { opacity: 0.6; } 50% { opacity: 1; } }
    @keyframes fadeInDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes scaleIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
</style>
</head>
<body>

<div class="main-wrapper">
    <div class="hero">
        <h1>MY-LogiC</h1>
        <p>Experience the future of legal intelligence.<br>Analyze contracts, detect risks, and ensure compliance in seconds.</p>
    </div>

    <div class="card">
        <div class="upload-container">
            <label class="upload-label" for="pdfInput">
                <i class="fa-solid fa-cloud-arrow-up"></i>
                <span id="fileName">Click to upload contract PDF</span>
                <small>Or drag and drop file here (Max 10MB)</small>
            </label>
            <input type="file" id="pdfInput" accept=".pdf" onchange="updateFileName()">
        </div>

        <button type="button" class="btn-analyze" onclick="analyzeContract()">
            Run Risk Analysis
        </button>

        <div id="loader">
            <div class="spinner"></div>
            <div class="loading-text">Analyzing legal parameters...</div>
        </div>

        <div id="errorMsg" class="error-message" style="display:none;"></div>
    </div>

    <div id="results"></div>
</div>

<footer class="site-footer">
    <div class="footer-content">
        <div class="footer-brand">
            <h4>MY-LogiC</h4>
            <p>Advanced AI-driven contract analysis for modern legal teams. Secure, fast, and precise.</p>
        </div>
        
        <div class="footer-col">
            <h5>Quick Links</h5>
            <ul>
                <li><a href="#">About Us</a></li>
                <li><a href="#">API Documentation</a></li>
                <li><a href="#">Security & Compliance</a></li>
                <li><a href="#">Contact Support</a></li>
            </ul>
        </div>
        
        <div class="footer-col">
            <h5>Connect</h5>
            <div class="social-links">
                <a href="#" class="social-icon"><i class="fa-brands fa-twitter"></i></a>
                <a href="#" class="social-icon"><i class="fa-brands fa-github"></i></a>
                <a href="#" class="social-icon"><i class="fa-brands fa-linkedin-in"></i></a>
                <a href="#" class="social-icon"><i class="fa-brands fa-discord"></i></a>
            </div>
        </div>
    </div>
    <div class="footer-bottom">
        &copy; 2026 MY-LogiC Inc. All rights reserved. &nbsp;|&nbsp; Privacy &nbsp;|&nbsp; Terms
    </div>
</footer>

<script>
function updateFileName() {
    const input = document.getElementById('pdfInput');
    const label = document.getElementById('fileName');
    const icon = document.querySelector('.upload-label i');
    const error = document.getElementById('errorMsg');
    error.style.display = 'none';

    if (input.files?.length > 0) {
        label.innerText = input.files[0].name;
        label.style.color = '#a5b4fc';
        icon.className = "fa-solid fa-file-pdf";
    } else {
        label.innerText = "Click to upload contract PDF";
        label.style.color = 'var(--text-main)';
        icon.className = "fa-solid fa-cloud-arrow-up";
    }
}

async function analyzeContract() {
    const fileInput = document.getElementById("pdfInput");
    const loader = document.getElementById("loader");
    const results = document.getElementById("results");
    const errorMsg = document.getElementById("errorMsg");
    const btn = document.querySelector(".btn-analyze");
    const file = fileInput.files?.[0];

    errorMsg.style.display = 'none';

    if (!file) {
        errorMsg.textContent = "Please select a PDF file first";
        errorMsg.style.display = 'block';
        return;
    }

    loader.style.display = "block";
    btn.disabled = true;
    btn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> Processing...';
    results.style.display = "none";
    results.innerHTML = "";

    const formData = new FormData();
    formData.append("file", file);

    try {
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 60000); 

        const res = await fetch("http://localhost:8001/analyze", {
            method: "POST",
            body: formData,
            signal: controller.signal
        });

        clearTimeout(timeoutId);

        if (!res.ok) {
            const errorText = await res.text().catch(() => "No response body");
            throw new Error(`Server error ${res.status}: ${errorText}`);
        }

        const data = await res.json();

        loader.style.display = "none";
        btn.disabled = false;
        btn.innerHTML = 'Run Risk Analysis';

        if (!data.clauses || !Array.isArray(data.clauses) || data.clauses.length === 0) {
            errorMsg.textContent = "No clauses were detected in the document.";
            errorMsg.style.display = 'block';
            return;
        }

        results.style.display = "block";

        data.clauses.forEach((c, index) => {
            let badgeColor = '#10b981';
            let badgeBg = 'rgba(16, 185, 129, 0.15)';
            let icon = 'fa-check-circle';

            if (c.confidence_score < 70) {
                badgeColor = '#f59e0b';
                badgeBg = 'rgba(245, 158, 11, 0.15)';
                icon = 'fa-exclamation-circle';
            }
            if (c.confidence_score < 50) {
                badgeColor = '#ef4444';
                badgeBg = 'rgba(239, 68, 68, 0.15)';
                icon = 'fa-triangle-exclamation';
            }

            const delay = index * 0.15 + 's';

            results.innerHTML += `
                <div class="result" style="animation-delay: ${delay}">
                    <div class="result-header">
                        <div class="clause-type">
                            <i class="fa-solid ${icon}" style="color:${badgeColor}"></i>
                            ${c.clause_type || 'Unknown Clause'}
                        </div>
                        <span class="score-badge" style="color:${badgeColor}; background:${badgeBg}; border:1px solid ${badgeColor}">
                            ${c.confidence_score ?? '?'}% Confidence
                        </span>
                    </div>
                    <div class="result-body">
                        <div class="extracted-text">
                            "${c.extracted_text || '(no text extracted)'}"
                        </div>
                        <div class="ai-insight">
                            <i class="fa-solid fa-wand-magic-sparkles"></i>
                            <div><strong>AI Insight:</strong> ${c.risk_flag_reason || 'No insight available'}</div>
                        </div>
                    </div>
                </div>`;
        });

    } catch (err) {
        loader.style.display = "none";
        btn.disabled = false;
        btn.innerHTML = 'Run Risk Analysis';

        let msg = "Analysis failed. ";
        if (err.name === "AbortError") {
            msg += "Request timed out (60s).";
        } else if (err.name === "TypeError" && err.message.includes("fetch")) {
            msg += "Cannot reach backend (http://localhost:8001).";
        } else {
            msg += err.message || "Unknown error";
        }

        errorMsg.textContent = msg;
        errorMsg.style.display = 'block';
    }
}
</script>
</body>
</html>
